
> nextn@0.1.0 test
> jest

 ‚ö† Mismatching @next/swc version, detected: 15.5.7 while Next.js is on 15.5.11. Please ensure these match
PASS src/__tests__/hooks/use-toast.test.ts
PASS src/__tests__/lib/logger.test.ts
PASS src/lib/db/__tests__/adapter.test.ts
PASS src/__tests__/components/feedback-dialog.test.tsx
PASS src/__tests__/components/lesson-plan/lesson-plan-input-section.test.tsx
PASS src/__tests__/data/ncert.test.ts
PASS src/__tests__/lib/indian-context.test.ts
PASS src/__tests__/lib/safety.test.ts
PASS src/__tests__/features/lesson-planner/hooks/use-lesson-plan.test.ts
  ‚óè Console

    console.warn
      [2026-02-11T19:16:00.340Z]  @firebase/firestore: Firestore (11.10.0): enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.

      24 | // Enable Offline Persistence (Client-side only)
      25 | if (typeof window !== 'undefined') {
    > 26 |     enableIndexedDbPersistence(db).catch((err) => {
         |                               ^
      27 |         if (err.code == 'failed-precondition') {
      28 |             // Multiple tabs open, persistence can only be enabled in one tab at a a time.
      29 |             console.warn('Firestore persistence failed: Multiple tabs open');

      at Logger.defaultLogHandler [as _logHandler] (node_modules/@firebase/logger/src/logger.ts:115:57)
      at Logger.warn (node_modules/@firebase/logger/src/logger.ts:206:10)
      at logWarn (node_modules/@firebase/firestore/src/util/log.ts:69:15)
      at enableIndexedDbPersistence (node_modules/@firebase/firestore/src/api/database.ts:375:3)
      at Object.<anonymous> (src/lib/firebase.ts:26:31)
      at Object.<anonymous> (src/features/lesson-planner/hooks/use-lesson-plan.ts:22:19)
      at Object.<anonymous> (src/__tests__/features/lesson-planner/hooks/use-lesson-plan.test.ts:64:24)

    console.warn
      [Performance] startAIGeneration was not called

      27 |     const endAIGeneration = useCallback((data: Partial<AIGenData>) => {
      28 |         if (!startTimeRef.current) {
    > 29 |             console.warn('[Performance] startAIGeneration was not called');
         |                     ^
      30 |             return;
      31 |         }
      32 |

      at warn (src/hooks/use-performance-tracking.ts:29:21)
      at Object.endAIGeneration [as onSubmit] (src/features/lesson-planner/hooks/use-lesson-plan.ts:236:21)
      at src/__tests__/features/lesson-planner/hooks/use-lesson-plan.test.ts:147:13

FAIL src/__tests__/app/page.test.tsx
  ‚óè Console

    console.warn
      [2026-02-11T19:16:00.285Z]  @firebase/firestore: Firestore (11.10.0): enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.

      24 | // Enable Offline Persistence (Client-side only)
      25 | if (typeof window !== 'undefined') {
    > 26 |     enableIndexedDbPersistence(db).catch((err) => {
         |                               ^
      27 |         if (err.code == 'failed-precondition') {
      28 |             // Multiple tabs open, persistence can only be enabled in one tab at a a time.
      29 |             console.warn('Firestore persistence failed: Multiple tabs open');

      at Logger.defaultLogHandler [as _logHandler] (node_modules/@firebase/logger/src/logger.ts:115:57)
      at Logger.warn (node_modules/@firebase/logger/src/logger.ts:206:10)
      at logWarn (node_modules/@firebase/firestore/src/util/log.ts:69:15)
      at enableIndexedDbPersistence (node_modules/@firebase/firestore/src/api/database.ts:375:3)
      at Object.<anonymous> (src/lib/firebase.ts:26:31)
      at Object.<anonymous> (src/app/page.tsx:27:19)
      at Object.<anonymous> (src/__tests__/app/page.test.tsx:93:54)

    console.error
      [Error: AggregateError] { type: 'XMLHttpRequest' }

      at VirtualConsole.<anonymous> (node_modules/@jest/environment-jsdom-abstract/build/index.js:87:23)
      at Object.dispatchError (node_modules/jsdom/lib/jsdom/living/xhr/xhr-utils.js:65:53)
      at Request.<anonymous> (node_modules/jsdom/lib/jsdom/living/xhr/XMLHttpRequest-impl.js:655:18)
      at ClientRequest.<anonymous> (node_modules/jsdom/lib/jsdom/living/helpers/http-request.js:127:14)

    console.error
      Router Error: TypeError: Network request failed
          at /Users/sargupta/SahayakAIV2/sahayakai/sahayakai-main/node_modules/whatwg-fetch/dist/fetch.umd.js:567:18
          at Timeout.task [as _onTimeout] (/Users/sargupta/SahayakAIV2/sahayakai/sahayakai-main/node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)
          at listOnTimeout (node:internal/timers:608:17)
          at processTimers (node:internal/timers:543:7)

      109 |       }
      110 |     } catch (error) {
    > 111 |       console.error("Router Error:", error);
          |               ^
      112 |       toast({
      113 |         title: "Connection Error",
      114 |         description: "Could not reach Sahayak. Please try again.",

      at error (src/app/page.tsx:111:15)
      at unset (node_modules/react-hook-form/src/logic/createFormControl.ts:1293:7)

    console.error
      [Error: AggregateError] { type: 'XMLHttpRequest' }

      at VirtualConsole.<anonymous> (node_modules/@jest/environment-jsdom-abstract/build/index.js:87:23)
      at Object.dispatchError (node_modules/jsdom/lib/jsdom/living/xhr/xhr-utils.js:65:53)
      at Request.<anonymous> (node_modules/jsdom/lib/jsdom/living/xhr/XMLHttpRequest-impl.js:655:18)
      at ClientRequest.<anonymous> (node_modules/jsdom/lib/jsdom/living/helpers/http-request.js:127:14)

    console.error
      Router Error: TypeError: Network request failed
          at /Users/sargupta/SahayakAIV2/sahayakai/sahayakai-main/node_modules/whatwg-fetch/dist/fetch.umd.js:567:18
          at Timeout.task [as _onTimeout] (/Users/sargupta/SahayakAIV2/sahayakai/sahayakai-main/node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)
          at listOnTimeout (node:internal/timers:608:17)
          at processTimers (node:internal/timers:543:7)

      109 |       }
      110 |     } catch (error) {
    > 111 |       console.error("Router Error:", error);
          |               ^
      112 |       toast({
      113 |         title: "Connection Error",
      114 |         description: "Could not reach Sahayak. Please try again.",

      at error (src/app/page.tsx:111:15)
      at unset (node_modules/react-hook-form/src/logic/createFormControl.ts:1293:7)

  ‚óè Home Page ‚Ä∫ navigates on form submission

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "/lesson-plan?topic=Photosynthesis"

    Number of calls: 0

    Ignored nodes: comments, script, style
    [36m<html>[39m
      [36m<head />[39m
      [36m<body>[39m
        [36m<div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex flex-col items-center justify-center min-h-[80vh] w-full max-w-6xl mx-auto px-4 py-8 md:py-12 gap-8 md:gap-12"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"text-center space-y-4 md:space-y-6 max-w-3xl animate-in fade-in slide-in-from-bottom-4 duration-700"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"inline-flex items-center gap-2 px-3 py-1 rounded-full bg-orange-50 text-orange-700 text-xs md:text-sm font-medium border border-orange-100 mb-2 md:mb-4"[39m
              [36m>[39m
                [36m<div[39m
                  [33mdata-testid[39m=[32m"icon-sparkles"[39m
                [36m/>[39m
                [36m<span>[39m
                  [0mAI-Powered Teaching Assistant for Bharat[0m
                [36m</span>[39m
              [36m</div>[39m
              [36m<h1[39m
                [33mclass[39m=[32m"font-headline text-4xl md:text-7xl font-bold text-slate-900 tracking-tight"[39m
              [36m>[39m
                [0mGood Morning[0m
                [0m, [0m
                [36m<span[39m
                  [33mclass[39m=[32m"text-primary"[39m
                [36m>[39m
                  [0mTeacher.[0m
                [36m</span>[39m
              [36m</h1>[39m
              [36m<p[39m
                [33mclass[39m=[32m"text-base md:text-xl text-slate-600 max-w-2xl mx-auto leading-relaxed px-4"[39m
              [36m>[39m
                [0mI am Sahayak, your personal AI companion. I can help you create lesson plans, quizzes, and engaging content in seconds.[0m
              [36m</p>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"w-full max-w-2xl animate-in fade-in slide-in-from-bottom-8 duration-700 delay-100 z-10 flex flex-col items-center gap-8"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"flex flex-col items-center gap-4"[39m
              [36m>[39m
                [36m<button>[39m
                  [0mMic Mock[0m
                [36m</button>[39m
                [36m<p[39m
                  [33mclass[39m=[32m"text-slate-500 font-medium text-sm md:text-base animate-pulse"[39m
                [36m>[39m
                  [0mTap the microphone and tell Sahayak what you want to teach today[0m
                [36m</p>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"w-full"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"rounded-lg border text-card-foreground border-none shadow-xl bg-white/80 backdrop-blur-sm ring-2 ring-slate-200 transition-all focus-within:ring-primary/50 focus-within:ring-4"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"md:p-6 p-2"[39m
                  [36m>[39m
                    [36m<form[39m
                      [33mclass[39m=[32m"flex items-center gap-2"[39m
                    [36m>[39m
                      [36m<div[39m
                        [33mclass[39m=[32m"relative flex-1"[39m
                      [36m>[39m
                        [36m<input[39m
                          [33mdata-testid[39m=[32m"topic-input"[39m
                          [33mname[39m=[32m"topic"[39m
                          [33mplaceholder[39m=[32m"Or type here (e.g. 'Photosynthesis')"[39m
                          [33mvalue[39m=[32m"Photosynthesis"[39m
                        [36m/>[39m
                      [36m</div>[39m
                      [36m<button[39m
                        [33maria-label[39m=[32m"Generate Lesson Plan"[39m
                        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap text-sm font-medium ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 h-10 w-10 shrink-0 rounded-full bg-primary hover:bg-primary/90 text-primary-foreground shadow-sm transition-all hover:scale-105 active:scale-95"[39m
                        [33mtype[39m=[32m"submit"[39m
                      [36m>[39m
                        [36m<div[39m
                          [33mdata-testid[39m=[32m"icon-arrow"[39m
                        [36m/>[39m
                      [36m</button>[39m
                    [36m</form>[39m
                  [36m</div>[39m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"flex flex-col items-center gap-2"[39m
              [36m>[39m
                [36m<p[39m
                  [33mclass[39m=[32m"text-center text-xs md:text-sm text-slate-500 font-medium px-4 line-clamp-1"[39m
                [36m>[39m
                  [0mtry: "Quiz about photosynthesis" or "Lesson plan for solar system"[0m
                [36m</p>[39m
                [36m<p[39m
                  [33mclass[39m=[32m"text-[10px] text-slate-400"[39m
                [36m>[39m
                  [0mSahayak can make mistakes. Please review generated content.[0m
                [36m</p>[39m
              [36m</div>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"grid grid-cols-2 md:grid-cols-2 lg:grid-cols-4 gap-4 md:gap-6 w-full animate-in fade-in slide-in-from-bottom-12 duration-700 delay-200"[39m
            [36m>[39m
              [36m<a[39m
                [33mclass[39m=[32m"group"[39m
                [33mhref[39m=[32m"/lesson-plan"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"rounded-lg border text-card-foreground shadow-sm h-full border-slate-200 bg-white/50 backdrop-blur-sm hover:bg-white hover:shadow-lg transition-all duration-300 hover:-translate-y-1"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"p-4 md:p-6 flex flex-col items-center text-center gap-3 md:gap-4"[39m
                  [36m>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"p-3 md:p-4 rounded-full group-hover:scale-110 transition-transform duration-300 text-orange-600 bg-orange-50"[39m
                    [36m>[39m
                      [36m<div[39m
                        [33mdata-testid[39m=[32m"icon-book"[39m
                      [36m/>[39m
                    [36m</div>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"space-y-1 md:space-y-2"[39m
                    [36m>[39m
                      [36m<h3[39m
                        [33mclass[39m=[32m"font-headline text-base md:text-lg font-semibold text-slate-800 leading-tight"[39m
                      [36m>[39m
                        [0mLesson Plan[0m
                      [36m</h3>[39m
                      [36m<p[39m
                        [33mclass[39m=[32m"text-xs md:text-sm text-slate-500 leading-relaxed md:line-clamp-none line-clamp-2"[39m
                      [36m>[39m
                        [0mNCERT-aligned plans.[0m
                      [36m</p>[39m
                    [36m</div>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"mt-auto pt-2 md:pt-4 text-primary font-medium text-xs md:text-sm flex items-center gap-1 opacity-100 md:opacity-0 md:group-hover:opacity-100 transition-opacity"[39m
                    [36m>[39m
                      [0mStart [0m
                      [36m<div[39m
                        [33mdata-testid[39m=[32m"icon-arrow"[39m
                      [36m/>[39m
                    [36m</div>[39m
                  [36m</div>[39m
                [36m</div>[39m
              [36m</a>[39m
              [36m<a[39m
                [33mclass[39m=[32m"group"[39m
                [33mhref[39m=[32m"/quiz-generator"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"rounded-lg border text-card-foreground shadow-sm h-full border-slate-200 bg-white/50 backdrop-blur-sm hover:bg-white hover:shadow-lg transition-all duration-300 hover:-translate-y-1"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"p-4 md:p-6 flex flex-col items-center text-center gap-3 md:gap-4"[39m
                  [36m>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"p-3 md:p-4 rounded-full group-hover:scale-110 transition-transform duration-300 text-blue-600 bg-blue-50"[39m
                    [36m>[39m
                      [36m<div[39m
                        [33mdata-testid[39m=[32m"icon-brain"[39m
                      [36m/>[39m
                    [36m</div>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"space-y-1 md:space-y-2"[39m
                    [36m>[39m
                      [36m<h3[39m
                        [33mclass[39m=[32m"font-headline text-base md:text-lg font-semibold text-slate-800 leading-tight"[39m
                      [36m>[39m
                        [0mQuiz Generator[0m
                      [36m</h3>[39m
                      [36m<p[39m
                        [33mclass[39m=[32m"text-xs md:text-sm text-slate-500 leading-relaxed md:line-clamp-none line-clamp-2"[39m
                      [36m>[39m
                        [0mInstant quizzes & worksheets.[0m
                      [36m</p>[39m
                    [36m</div>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"mt-auto pt-2 md:pt-4 text-primary font-medium text-xs md:text-sm flex items-center gap-1 opacity-100 md:opacity-0 md:group-hover:opacity-100 transition-opacity"[39m
                    [36m>[39m
                      [0mStart [0m
                      [36m<div[39m
                        [33mdata-testid[39m=[32m"icon-arrow"[39m
                      [36m/>[39m
                    [36m</div>[39m
                  [36m</div>[39m
                [36m</div>[39m
              [36m</a>[39m
              [36m<a[39m
                [33mclass[39m=[32m"group"[39m
                [33mhref[39m=[32m"/content-creator"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"rounded-lg border text-card-foreground shadow-sm h-full border-slate-200 bg-white/50 backdrop-blur-sm hover:bg-white hover:shadow-lg transition-all duration-300 hover:-translate-y-1"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"p-4 md:p-6 flex flex-col items-center text-center gap-3 md:gap-4"[39m
                  [36m>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"p-3 md:p-4 rounded-full group-hover:scale-110 transition-transform duration-300 text-green-600 bg-green-50"[39m
                    [36m>[39m
                      [36m<div[39m
                        [33mdata-testid[39m=[32m"icon-pen"[39m
                      [36m/>[39m
                    [36m</div>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"space-y-1 md:space-y-2"[39m
                    [36m>[39m
                      [36m<h3[39m
                        [33mclass[39m=[32m"font-headline text-base md:text-lg font-semibold text-slate-800 leading-tight"[39m
                      [36m>[39m
                        [0mContent Creator[0m
                      [36m</h3>[39m
                      [36m<p[39m
                        [33mclass[39m=[32m"text-xs md:text-sm text-slate-500 leading-relaxed md:line-clamp-none line-clamp-2"[39m
                      [36m>[39m
                        [0mStories & visual aids.[0m
                      [36m</p>[39m
                    [36m</div>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"mt-auto pt-2 md:pt-4 text-primary font-medium text-xs md:text-sm flex items-center gap-1 opacity-100 md:opacity-0 md:group-hover:opacity-100 transition-opacity"[39m
                    [36m>[39m
                      [0mStart [0m
                      [36m<div[39m
                        [33mdata-testid[39m=[32m"icon-arrow"[39m
                      [36m/>[39m
                    [36m</div>[39m
                  [36m</div>[39m
                [36m</div>[39m
              [36m</a>[39m
              [36m<a[39m
                [33mclass[39m=[32m"group"[39m
                [33mhref[39m=[32m"/teacher-training"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"rounded-lg border text-card-foreground shadow-sm h-full border-slate-200 bg-white/50 backdrop-blur-sm hover:bg-white hover:shadow-lg transition-all duration-300 hover:-translate-y-1"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"p-4 md:p-6 flex flex-col items-center text-center gap-3 md:gap-4"[39m
                  [36m>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"p-3 md:p-4 rounded-full group-hover:scale-110 transition-transform duration-300 text-purple-600 bg-purple-50"[39m
                    [36m>[39m
                      [36m<div[39m
                        [33mdata-testid[39m=[32m"icon-grad"[39m
                      [36m/>[39m
                    [36m</div>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"space-y-1 md:space-y-2"[39m
                    [36m>[39m
                      [36m<h3[39m
                        [33mclass[39m=[32m"font-headline text-base md:text-lg font-semibold text-slate-800 leading-tight"[39m
                      [36m>[39m
                        [0mTeacher Training[0m
                      [36m</h3>[39m
                      [36m<p[39m
                        [33mclass[39m=[32m"text-xs md:text-sm text-slate-500 leading-relaxed md:line-clamp-none line-clamp-2"[39m
                      [36m>[39m
                        [0mProfessional development.[0m
                      [36m</p>[39m
                    [36m</div>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"mt-auto pt-2 md:pt-4 text-primary font-medium text-xs md:text-sm flex items-center gap-1 opacity-100 md:opacity-0 md:group-hover:opacity-100 transition-opacity"[39m
                    [36m>[39m
                      [0mStart [0m
                      [36m<div[39m
                        [33mdata-testid[39m=[32m"icon-arrow"[39m
                      [36m/>[39m
                    [36m</div>[39m
                  [36m</div>[39m
                [36m</div>[39m
              [36m</a>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</body>[39m
    [36m</html>[39m

       95 |
       96 |         await waitFor(() => {
    >  97 |             expect(mockPush).toHaveBeenCalledWith('/lesson-plan?topic=Photosynthesis');
          |                              ^
       98 |         });
       99 |     });
      100 |

      at toHaveBeenCalledWith (src/__tests__/app/page.test.tsx:97:30)
      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)
      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)
      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)
      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)

  ‚óè Home Page ‚Ä∫ handles microphone input

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: "/lesson-plan?topic=Mic%20Input"

    Number of calls: 0

    Ignored nodes: comments, script, style
    [36m<html>[39m
      [36m<head />[39m
      [36m<body>[39m
        [36m<div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex flex-col items-center justify-center min-h-[80vh] w-full max-w-6xl mx-auto px-4 py-8 md:py-12 gap-8 md:gap-12"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"text-center space-y-4 md:space-y-6 max-w-3xl animate-in fade-in slide-in-from-bottom-4 duration-700"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"inline-flex items-center gap-2 px-3 py-1 rounded-full bg-orange-50 text-orange-700 text-xs md:text-sm font-medium border border-orange-100 mb-2 md:mb-4"[39m
              [36m>[39m
                [36m<div[39m
                  [33mdata-testid[39m=[32m"icon-sparkles"[39m
                [36m/>[39m
                [36m<span>[39m
                  [0mAI-Powered Teaching Assistant for Bharat[0m
                [36m</span>[39m
              [36m</div>[39m
              [36m<h1[39m
                [33mclass[39m=[32m"font-headline text-4xl md:text-7xl font-bold text-slate-900 tracking-tight"[39m
              [36m>[39m
                [0mGood Morning[0m
                [0m, [0m
                [36m<span[39m
                  [33mclass[39m=[32m"text-primary"[39m
                [36m>[39m
                  [0mTeacher.[0m
                [36m</span>[39m
              [36m</h1>[39m
              [36m<p[39m
                [33mclass[39m=[32m"text-base md:text-xl text-slate-600 max-w-2xl mx-auto leading-relaxed px-4"[39m
              [36m>[39m
                [0mI am Sahayak, your personal AI companion. I can help you create lesson plans, quizzes, and engaging content in seconds.[0m
              [36m</p>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"w-full max-w-2xl animate-in fade-in slide-in-from-bottom-8 duration-700 delay-100 z-10 flex flex-col items-center gap-8"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"flex flex-col items-center gap-4"[39m
              [36m>[39m
                [36m<button>[39m
                  [0mMic Mock[0m
                [36m</button>[39m
                [36m<p[39m
                  [33mclass[39m=[32m"text-slate-500 font-medium text-sm md:text-base animate-pulse"[39m
                [36m>[39m
                  [0mTap the microphone and tell Sahayak what you want to teach today[0m
                [36m</p>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"w-full"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"rounded-lg border text-card-foreground border-none shadow-xl bg-white/80 backdrop-blur-sm ring-2 ring-slate-200 transition-all focus-within:ring-primary/50 focus-within:ring-4"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"md:p-6 p-2"[39m
                  [36m>[39m
                    [36m<form[39m
                      [33mclass[39m=[32m"flex items-center gap-2"[39m
                    [36m>[39m
                      [36m<div[39m
                        [33mclass[39m=[32m"relative flex-1"[39m
                      [36m>[39m
                        [36m<input[39m
                          [33mdata-testid[39m=[32m"topic-input"[39m
                          [33mname[39m=[32m"topic"[39m
                          [33mplaceholder[39m=[32m"Or type here (e.g. 'Photosynthesis')"[39m
                          [33mvalue[39m=[32m"Mic Input"[39m
                        [36m/>[39m
                      [36m</div>[39m
                      [36m<button[39m
                        [33maria-label[39m=[32m"Generate Lesson Plan"[39m
                        [33mclass[39m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap text-sm font-medium ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 h-10 w-10 shrink-0 rounded-full bg-primary hover:bg-primary/90 text-primary-foreground shadow-sm transition-all hover:scale-105 active:scale-95"[39m
                        [33mtype[39m=[32m"submit"[39m
                      [36m>[39m
                        [36m<div[39m
                          [33mdata-testid[39m=[32m"icon-arrow"[39m
                        [36m/>[39m
                      [36m</button>[39m
                    [36m</form>[39m
                  [36m</div>[39m
                [36m</div>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"flex flex-col items-center gap-2"[39m
              [36m>[39m
                [36m<p[39m
                  [33mclass[39m=[32m"text-center text-xs md:text-sm text-slate-500 font-medium px-4 line-clamp-1"[39m
                [36m>[39m
                  [0mtry: "Quiz about photosynthesis" or "Lesson plan for solar system"[0m
                [36m</p>[39m
                [36m<p[39m
                  [33mclass[39m=[32m"text-[10px] text-slate-400"[39m
                [36m>[39m
                  [0mSahayak can make mistakes. Please review generated content.[0m
                [36m</p>[39m
              [36m</div>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"grid grid-cols-2 md:grid-cols-2 lg:grid-cols-4 gap-4 md:gap-6 w-full animate-in fade-in slide-in-from-bottom-12 duration-700 delay-200"[39m
            [36m>[39m
              [36m<a[39m
                [33mclass[39m=[32m"group"[39m
                [33mhref[39m=[32m"/lesson-plan"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"rounded-lg border text-card-foreground shadow-sm h-full border-slate-200 bg-white/50 backdrop-blur-sm hover:bg-white hover:shadow-lg transition-all duration-300 hover:-translate-y-1"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"p-4 md:p-6 flex flex-col items-center text-center gap-3 md:gap-4"[39m
                  [36m>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"p-3 md:p-4 rounded-full group-hover:scale-110 transition-transform duration-300 text-orange-600 bg-orange-50"[39m
                    [36m>[39m
                      [36m<div[39m
                        [33mdata-testid[39m=[32m"icon-book"[39m
                      [36m/>[39m
                    [36m</div>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"space-y-1 md:space-y-2"[39m
                    [36m>[39m
                      [36m<h3[39m
                        [33mclass[39m=[32m"font-headline text-base md:text-lg font-semibold text-slate-800 leading-tight"[39m
                      [36m>[39m
                        [0mLesson Plan[0m
                      [36m</h3>[39m
                      [36m<p[39m
                        [33mclass[39m=[32m"text-xs md:text-sm text-slate-500 leading-relaxed md:line-clamp-none line-clamp-2"[39m
                      [36m>[39m
                        [0mNCERT-aligned plans.[0m
                      [36m</p>[39m
                    [36m</div>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"mt-auto pt-2 md:pt-4 text-primary font-medium text-xs md:text-sm flex items-center gap-1 opacity-100 md:opacity-0 md:group-hover:opacity-100 transition-opacity"[39m
                    [36m>[39m
                      [0mStart [0m
                      [36m<div[39m
                        [33mdata-testid[39m=[32m"icon-arrow"[39m
                      [36m/>[39m
                    [36m</div>[39m
                  [36m</div>[39m
                [36m</div>[39m
              [36m</a>[39m
              [36m<a[39m
                [33mclass[39m=[32m"group"[39m
                [33mhref[39m=[32m"/quiz-generator"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"rounded-lg border text-card-foreground shadow-sm h-full border-slate-200 bg-white/50 backdrop-blur-sm hover:bg-white hover:shadow-lg transition-all duration-300 hover:-translate-y-1"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"p-4 md:p-6 flex flex-col items-center text-center gap-3 md:gap-4"[39m
                  [36m>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"p-3 md:p-4 rounded-full group-hover:scale-110 transition-transform duration-300 text-blue-600 bg-blue-50"[39m
                    [36m>[39m
                      [36m<div[39m
                        [33mdata-testid[39m=[32m"icon-brain"[39m
                      [36m/>[39m
                    [36m</div>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"space-y-1 md:space-y-2"[39m
                    [36m>[39m
                      [36m<h3[39m
                        [33mclass[39m=[32m"font-headline text-base md:text-lg font-semibold text-slate-800 leading-tight"[39m
                      [36m>[39m
                        [0mQuiz Generator[0m
                      [36m</h3>[39m
                      [36m<p[39m
                        [33mclass[39m=[32m"text-xs md:text-sm text-slate-500 leading-relaxed md:line-clamp-none line-clamp-2"[39m
                      [36m>[39m
                        [0mInstant quizzes & worksheets.[0m
                      [36m</p>[39m
                    [36m</div>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"mt-auto pt-2 md:pt-4 text-primary font-medium text-xs md:text-sm flex items-center gap-1 opacity-100 md:opacity-0 md:group-hover:opacity-100 transition-opacity"[39m
                    [36m>[39m
                      [0mStart [0m
                      [36m<div[39m
                        [33mdata-testid[39m=[32m"icon-arrow"[39m
                      [36m/>[39m
                    [36m</div>[39m
                  [36m</div>[39m
                [36m</div>[39m
              [36m</a>[39m
              [36m<a[39m
                [33mclass[39m=[32m"group"[39m
                [33mhref[39m=[32m"/content-creator"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"rounded-lg border text-card-foreground shadow-sm h-full border-slate-200 bg-white/50 backdrop-blur-sm hover:bg-white hover:shadow-lg transition-all duration-300 hover:-translate-y-1"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"p-4 md:p-6 flex flex-col items-center text-center gap-3 md:gap-4"[39m
                  [36m>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"p-3 md:p-4 rounded-full group-hover:scale-110 transition-transform duration-300 text-green-600 bg-green-50"[39m
                    [36m>[39m
                      [36m<div[39m
                        [33mdata-testid[39m=[32m"icon-pen"[39m
                      [36m/>[39m
                    [36m</div>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"space-y-1 md:space-y-2"[39m
                    [36m>[39m
                      [36m<h3[39m
                        [33mclass[39m=[32m"font-headline text-base md:text-lg font-semibold text-slate-800 leading-tight"[39m
                      [36m>[39m
                        [0mContent Creator[0m
                      [36m</h3>[39m
                      [36m<p[39m
                        [33mclass[39m=[32m"text-xs md:text-sm text-slate-500 leading-relaxed md:line-clamp-none line-clamp-2"[39m
                      [36m>[39m
                        [0mStories & visual aids.[0m
                      [36m</p>[39m
                    [36m</div>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"mt-auto pt-2 md:pt-4 text-primary font-medium text-xs md:text-sm flex items-center gap-1 opacity-100 md:opacity-0 md:group-hover:opacity-100 transition-opacity"[39m
                    [36m>[39m
                      [0mStart [0m
                      [36m<div[39m
                        [33mdata-testid[39m=[32m"icon-arrow"[39m
                      [36m/>[39m
                    [36m</div>[39m
                  [36m</div>[39m
                [36m</div>[39m
              [36m</a>[39m
              [36m<a[39m
                [33mclass[39m=[32m"group"[39m
                [33mhref[39m=[32m"/teacher-training"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"rounded-lg border text-card-foreground shadow-sm h-full border-slate-200 bg-white/50 backdrop-blur-sm hover:bg-white hover:shadow-lg transition-all duration-300 hover:-translate-y-1"[39m
                [36m>[39m
                  [36m<div[39m
                    [33mclass[39m=[32m"p-4 md:p-6 flex flex-col items-center text-center gap-3 md:gap-4"[39m
                  [36m>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"p-3 md:p-4 rounded-full group-hover:scale-110 transition-transform duration-300 text-purple-600 bg-purple-50"[39m
                    [36m>[39m
                      [36m<div[39m
                        [33mdata-testid[39m=[32m"icon-grad"[39m
                      [36m/>[39m
                    [36m</div>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"space-y-1 md:space-y-2"[39m
                    [36m>[39m
                      [36m<h3[39m
                        [33mclass[39m=[32m"font-headline text-base md:text-lg font-semibold text-slate-800 leading-tight"[39m
                      [36m>[39m
                        [0mTeacher Training[0m
                      [36m</h3>[39m
                      [36m<p[39m
                        [33mclass[39m=[32m"text-xs md:text-sm text-slate-500 leading-relaxed md:line-clamp-none line-clamp-2"[39m
                      [36m>[39m
                        [0mProfessional development.[0m
                      [36m</p>[39m
                    [36m</div>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"mt-auto pt-2 md:pt-4 text-primary font-medium text-xs md:text-sm flex items-center gap-1 opacity-100 md:opacity-0 md:group-hover:opacity-100 transition-opacity"[39m
                    [36m>[39m
                      [0mStart [0m
                      [36m<div[39m
                        [33mdata-testid[39m=[32m"icon-arrow"[39m
                      [36m/>[39m
                    [36m</div>[39m
                  [36m</div>[39m
                [36m</div>[39m
              [36m</a>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</body>[39m
    [36m</html>[39m

      105 |
      106 |         await waitFor(() => {
    > 107 |             expect(mockPush).toHaveBeenCalledWith('/lesson-plan?topic=Mic%20Input');
          |                              ^
      108 |         });
      109 |     });
      110 | });

      at toHaveBeenCalledWith (src/__tests__/app/page.test.tsx:107:30)
      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@testing-library/dom/dist/config.js:47:12)
      at checkCallback (node_modules/@testing-library/dom/dist/wait-for.js:124:77)
      at checkRealTimersCallback (node_modules/@testing-library/dom/dist/wait-for.js:118:16)
      at Timeout.task [as _onTimeout] (node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)

--------------------------------|---------|----------|---------|---------|-----------------------------------------------------------------------------------------------------------------------
File                            | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                                                                                                     
--------------------------------|---------|----------|---------|---------|-----------------------------------------------------------------------------------------------------------------------
All files                       |   86.16 |    61.21 |   68.75 |   86.16 |                                                                                                                       
 app                            |   87.27 |    33.33 |      60 |   87.27 |                                                                                                                       
  page.tsx                      |   87.27 |    33.33 |      60 |   87.27 | 40-41,49-51,75-76,83-95,97-109,191-193                                                                                
 components                     |    90.9 |       80 |   71.42 |    90.9 |                                                                                                                       
  feedback-dialog.tsx           |    90.9 |       80 |   71.42 |    90.9 | 44-45,56-61,79-82                                                                                                     
 components/lesson-plan         |     100 |       25 |     100 |     100 |                                                                                                                       
  lesson-plan-input-section.tsx |     100 |       25 |     100 |     100 | 53-98                                                                                                                 
 data/ncert                     |   98.75 |      100 |   33.33 |   98.75 |                                                                                                                       
  english.ts                    |     100 |      100 |     100 |     100 |                                                                                                                       
  hindi.ts                      |     100 |      100 |     100 |     100 |                                                                                                                       
  index.ts                      |      90 |      100 |   33.33 |      90 | 71-72,75-80                                                                                                           
  it.ts                         |     100 |      100 |     100 |     100 |                                                                                                                       
  kannada.ts                    |     100 |      100 |     100 |     100 |                                                                                                                       
  mathematics.ts                |     100 |      100 |     100 |     100 |                                                                                                                       
  sanskrit.ts                   |     100 |      100 |     100 |     100 |                                                                                                                       
  science.ts                    |     100 |      100 |     100 |     100 |                                                                                                                       
  social-studies.ts             |     100 |      100 |     100 |     100 |                                                                                                                       
 features/lesson-planner/hooks  |   68.31 |    51.42 |      80 |   68.31 |                                                                                                                       
  use-lesson-plan.ts            |   68.31 |    51.42 |      80 |   68.31 | 68-84,107-108,123-134,136-137,150-190,192-196,261-262,275-287,289-290,295-316,333-334,349-351,357-363,401-405,420-438 
 hooks                          |   82.47 |    68.42 |      70 |   82.47 |                                                                                                                       
  use-toast.ts                  |   82.47 |    68.42 |      70 |   82.47 | 63-64,67-71,86-91,101-104,114,119-128,149-152,162-163                                                                 
 lib                            |   83.11 |     73.8 |   66.66 |   83.11 |                                                                                                                       
  indian-context.ts             |     100 |      100 |     100 |     100 |                                                                                                                       
  logger.ts                     |   57.44 |    65.38 |      50 |   57.44 | 32-57,60-67,81-82,84-85,93,98-99,103-106,111-112,120-121,128-138                                                      
  safety.ts                     |   93.22 |    83.33 |     100 |   93.22 | 34-37                                                                                                                 
--------------------------------|---------|----------|---------|---------|-----------------------------------------------------------------------------------------------------------------------
Test Suites: 1 failed, 9 passed, 10 total
Tests:       2 failed, 47 passed, 49 total
Snapshots:   0 total
Time:        3.842 s, estimated 4 s
Ran all test suites.
